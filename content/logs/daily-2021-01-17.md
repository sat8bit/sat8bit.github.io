---
title: "Daily/2021/01/17"
date: 2021-01-17T22:49:47+09:00
---

# Todo

| Todo                                             | Done |
| ------------------------------------------------ | ---- |
| hugo の先日の log が出てない件の確認             |      |
| Github Actions を使って hugo build + push を行う |      |
| コーディングする                                 |      |

# Log

## hugo の先日の log が出てない件の確認

テンプレートの draft が何故か true のまま残ってた。ただのログなので default を false に変更。

と思ったけど draft の default が false っぽいので削除すれば良さそう。

## Github Actions を使って hugo build + push を行う

今手元で build して push してるけどめんどくさいので、Github Actions を使って build した後 github に push したことがないので、やってみる。

まずは [公式ドキュメント](https://docs.github.com/ja/actions/reference/workflow-syntax-for-github-actions) を見ながらビルドまで作ってみる。

### Job と Step

Job とその下に Step がある。

こういうの大体どういう区切りで使うか迷うので、まとめておく。

- Container Image が Job 単位でしか設定できなさそう
- Job は並列実行（逐次にする場合は needs を指定する）。Steps は逐次実行。

### Step.uses

> ジョブでステップの一部として実行されるアクションを選択します。 アクションとは、再利用可能なコードの単位です。 ワークフロー、パブリックリポジトリ、または公開されている Docker コンテナイメージと同じリポジトリで定義されているアクションを使用できます。

再利用可能な actions 一覧は [ここ](https://github.com/actions)。

action.yml を見れば作り方もわかりそう？

### Strategy

Job のビルドをマトリクスでやるときに使うっぽい。複数 OS バージョンとか。

- OS バージョンをマトリクスする場合は `runs-on` でやる必要がある。
- それ以外は `${{matrics.変数名}}` みたいに使えば良い。
- `include` key を使うと、マトリクスの変数をセットにできるっぽい？
- max-parallel で Job を並列化できる

良さそう。今回は使わないので必要になったときに。

### Service

> ワークフロー中のジョブのためのサービスコンテナをホストするために使われます。 サービスコンテナは、データベースや Redis のようなキャッシュサービスの作成に役立ちます。 ランナーは自動的に Docker ネットワークを作成し、サービスコンテナのライフサイクルを管理します。

ワークフロー中でキャッシュとか一時的に必要になったときの話かな。
使わなそうなので保留。必要そうになったときに調べる。

### とか調べてたら・・・

既に [actions を作ってくれてる方がいた](https://github.com/peaceiris/actions-hugo)。すごいありがたい。

沿って作ってみる。内容は上のリンクのコピペなので割愛します。



## Next

## 参考
